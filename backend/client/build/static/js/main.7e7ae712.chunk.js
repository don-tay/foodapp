(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{287:function(e,t,a){},392:function(e,t,a){},450:function(e,t,a){e.exports=a(679)},455:function(e,t,a){},456:function(e,t,a){},547:function(e,t,a){},679:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(85),c=a.n(r),o=(a(455),a(9)),i=a(32),m=a(31),u=(a(456),a(457),a(723)),s=a(402),d=a(724),E=a(33);var f=function(e){return l.a.createElement(s.a.Item,{as:i.b,to:"/",name:"/",active:"/"===window.location.pathname,content:"Home",onClick:e.onTabClick})};var g=function(e){return l.a.createElement(s.a.Item,{as:i.b,to:"/home",name:"/home",active:"/home"===window.location.pathname,content:"Food",onClick:e.onTabClick})};var p=function(e){return l.a.createElement(s.a.Item,{as:i.b,to:"/history",name:"/history",active:"/history"===window.location.pathname,content:"History",onClick:e.onTabClick})};var b=function(e){return l.a.createElement(s.a.Item,{as:i.b,to:"/profile",name:"/profile",active:"/profile"===window.location.pathname,content:"Profile",onClick:e.onTabClick})},h=a(351);var y=function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),r=a[0],c=a[1];return l.a.createElement(h.a,{as:s.a.Item,link:!0},l.a.createElement(h.a.Title,{onClick:function(){return c(!r)},active:r},"Rider"),l.a.createElement(h.a.Content,{active:r},l.a.createElement(s.a.Item,{as:i.b,to:"/rider/activity",name:"/rider/activity",active:"/rider/activity"===window.location.pathname,content:"Activity",onClick:e.onTabClick}),l.a.createElement(s.a.Item,{as:i.b,to:"/rider/summary",name:"/rider/summary",active:"/rider/summary"===window.location.pathname,content:"Summary",onClick:e.onTabClick})))};var v=function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),r=a[0],c=a[1];return l.a.createElement(h.a,{as:s.a.Item,link:!0},l.a.createElement(h.a.Title,{onClick:function(){return c(!r)},active:r},"Staff"),l.a.createElement(h.a.Content,{active:r},l.a.createElement(s.a.Item,{as:i.b,to:"/staff/menu",name:"/staff/menu",active:"/staff/menu"===window.location.pathname,content:"Menu",onClick:e.onTabClick}),l.a.createElement(s.a.Item,{as:i.b,to:"/staff/summary",name:"/staff/summary",active:"/staff/summary"===window.location.pathname,content:"Summary",onClick:e.onTabClick})))};var j=function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),r=a[0],c=a[1];return l.a.createElement(h.a,{as:s.a.Item,link:!0},l.a.createElement(h.a.Title,{onClick:function(){return c(!r)},active:r},"Manager"),l.a.createElement(h.a.Content,{active:r},l.a.createElement(s.a.Item,{as:i.b,to:"/manager/promotion",name:"/manager/promotion",active:"/manager/promotion"===window.location.pathname,content:"Promotions",onClick:e.onTabClick}),l.a.createElement(s.a.Item,{as:i.b,to:"/manager/summary",name:"/manager/summary",active:"/manager/summary"===window.location.pathname,content:"Summary",onClick:e.onTabClick})))},O=Object(n.createContext)({uid:null,role:null,name:null,email:null,reload:null});var w=function(e){var t=e.signOut,a=e.children,r=Object(n.useState)(!1),c=Object(o.a)(r,2),i=c[0],m=c[1],h=Object(n.useContext)(O).role,w=function(){m(!1)};return l.a.createElement(u.a.Pushable,null,l.a.createElement(u.a,{as:s.a,animation:"push",onHide:function(){return m(!1)},vertical:!0,visible:i},l.a.createElement(d.a,{size:"large",icon:!0,textAlign:"center",style:{marginTop:"1rem"}},l.a.createElement(E.a,{name:"truck"}),"Food Truck"),l.a.createElement(f,{onTabClick:w}),0===h&&l.a.createElement(g,{onTabClick:w}),0===h&&l.a.createElement(p,{onTabClick:w}),l.a.createElement(b,{onTabClick:w}),2===h&&l.a.createElement(y,{onTabClick:w}),1===h&&l.a.createElement(v,{onTabClick:w}),3===h&&l.a.createElement(j,{onTabClick:w}),l.a.createElement(s.a.Item,{content:"Sign Out",link:!0,onClick:t})),l.a.createElement(u.a.Pusher,{dimmed:i},l.a.createElement(s.a,{borderless:!0,size:"huge",fixed:"top"},l.a.createElement(s.a.Item,{onClick:function(){return m(!0)},icon:"sidebar"})),l.a.createElement("div",{style:{height:"100vh",overflow:"auto"}},a)))},C=a(725);var x=function(){var e=Object(n.useContext)(O).name;return l.a.createElement("main",{className:"welcome-page"},l.a.createElement(s.a,{size:"huge",style:{opacity:0}}),l.a.createElement(C.a,{textAlign:"center"},l.a.createElement("h1",null,"Welcome ",e," to"),l.a.createElement(E.a,{size:"massive",name:"truck"}),l.a.createElement("h1",null,"Food Truck")),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null))},S=a(435),D=a(728),k=a(306),F=a(229),M=a(143),I=a(727),V=(a(547),a(744)),z=a(111),L=a(726),T=a(738),A=a(21),Y=a.n(A),R=["elliot.jpg","helen.jpg","jenny.jpg","joe.jpg","justen.jpg","laura.jpg"];var P=function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)([]),m=Object(o.a)(i,2),u=m[0],s=m[1];Object(n.useEffect)((function(){d()}),[]);var d=function(){var t="http://localhost:5000/api/restaurants/'".concat(e.rname,"'/reviews");Y.a.get(t).then((function(t){console.log("Get reviews for ".concat(e.rname),t.data),s(t.data)})).catch((function(t){console.log("Error retrieving reviews for ".concat(e.rname,", error"))}))};return l.a.createElement(V.a,{open:r,size:"small",onClose:function(){return c(!1)},trigger:l.a.createElement(z.a,{color:"teal",onClick:function(){return c(!0)},content:"Reviews",compact:!0})},l.a.createElement(V.a.Header,null,e.rname," Reviews"),l.a.createElement(V.a.Content,null,l.a.createElement(L.a,null,u.map((function(e,t){var a=R[Math.floor(Math.random()*R.length)];return l.a.createElement(L.a.Event,{key:t},l.a.createElement(L.a.Label,null,l.a.createElement("img",{src:"https://react.semantic-ui.com/images/avatar/small/".concat(a)})),l.a.createElement(L.a.Content,null,l.a.createElement(L.a.Summary,null,l.a.createElement(L.a.User,null,e.name)," reviewed on",l.a.createElement(L.a.Date,null,Object(T.a)(1e3*e.reviewdatetime,"MM/dd/yyyy hh:mm aa"))),l.a.createElement(L.a.Extra,{text:!0},e.review)))})))),l.a.createElement(V.a.Actions,null,l.a.createElement(z.a,{primary:!0,content:"Done",onClick:function(){c(!1)}})))},_={name:"Toast Box (West Coast Plaza)",categories:["Asian","Noodle","Soup"],rating:4.5,promotions:["10% off all users","$7 off first-time users"]};var G=function(e){var t=e.restaurant;return l.a.createElement(F.a,{fluid:!0,raised:!0,className:"reactive-card",onClick:function(){}},l.a.createElement(M.a,{src:t.imgurl,ui:"false",style:{maxHeight:"25vh"},onClick:function(){return e.setSelectedRestaurant(t.rname)}}),l.a.createElement(F.a.Content,null,l.a.createElement(F.a.Header,{style:{display:"flex",justifyContent:"space-between"},onClick:function(){return e.setSelectedRestaurant(t.rname)}},t.rname,l.a.createElement("span",null,_.rating," ",l.a.createElement(I.a,{icon:"star",disabled:!0,defaultRating:"1"}))),l.a.createElement(F.a.Description,null,"Minimum order amount: $",t.minamt),l.a.createElement(F.a.Meta,{style:{display:"flex",justifyContent:"space-between"}},t.categories.join(", "),l.a.createElement(P,{rname:t.rname})),l.a.createElement("br",null),l.a.createElement(F.a.Description,{onClick:function(){return e.setSelectedRestaurant(t.rname)}},"$3.99 delivery fee",_.promotions.map((function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("br",null),l.a.createElement("strong",{style:{color:"#0d97ff"}},e))})))))};a(287);var N=function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(!0),m=Object(o.a)(i,2),u=m[0],s=m[1],d=Object(n.useState)([]),E=Object(o.a)(d,2),f=E[0],g=E[1],p=Object(n.useContext)(O).uid;Object(n.useEffect)((function(){Y.a.get("http://localhost:5000/api/restaurants").then((function(e){console.log("response",e.data),c(e.data),s(!1),b()})).catch((function(e){console.log("Error retrieving restaurants:",e)}))}),[]);var b=function(){var e="http://localhost:5000/api/customers/".concat(p,"/locations");Y.a.get(e).then((function(e){console.log("Fetch recent delivery locations",e.data),g(e.data)})).catch((function(e){console.log("Unable to fetch recent delivery locations",e)}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between"}},l.a.createElement("h1",null,"Restaurants"),l.a.createElement("span",null,l.a.createElement(S.a,{className:"rounded-input",placeholder:"Enter location...",iconPosition:"left",icon:"location arrow",value:e.location,list:"orderLocations",onChange:function(t,a){e.setLocation(a.value)}}),l.a.createElement("datalist",{id:"orderLocations"},f.map((function(e){return l.a.createElement("option",{value:e.location})})))),l.a.createElement("span",null,l.a.createElement(D.a,{placeholder:"Search category..."}))),e.location?u?l.a.createElement(k.a,{size:"massive",basic:!0,placeholder:!0,loading:u,textAlign:"center"}):l.a.createElement(F.a.Group,null,r.map((function(t,a){return l.a.createElement(G,{key:a,restaurant:t,setSelectedRestaurant:e.setSelectedRestaurant})}))):l.a.createElement(k.a,{size:"massive",basic:!0,placeholder:!0,textAlign:"center",content:"You have not selected a location"}))},H=a(90),$=a(432),q=a(253),W=a.n(q);a(392);var U=function(e){var t=Object(n.useState)("0"),a=Object(o.a)(t,2),r=a[0],c=a[1];return l.a.createElement($.a,null,l.a.createElement($.a.Image,{src:e.imgurl}),l.a.createElement($.a.Content,null,l.a.createElement($.a.Header,{style:{display:"flex",justifyContent:"space-between"}},e.name,l.a.createElement("span",null,"$",e.price.toFixed(2))),l.a.createElement($.a.Extra,null,l.a.createElement(H.a,null,e.category)),l.a.createElement($.a.Extra,null,l.a.createElement(W.a,{minValue:0,maxValue:e.limit,value:r,onChange:function(t){c(t),e.updateSelectedFoodItems({name:e.name,quantity:parseInt(t),price:e.price})},className:"number-input"}))))},B=a(436),J=a(741);var K=function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(0),u=Object(o.a)(i,2),s=u[0],f=u[1],g=Object(n.useState)(),p=Object(o.a)(g,2),b=p[0],h=p[1],y=Object(n.useContext)(O).uid,v=Object(n.useState)(!1),j=Object(o.a)(v,2),w=j[0],C=j[1],x=Object(m.g)();return Object(n.useEffect)((function(){Y.a.get("http://localhost:5000/api/customers/".concat(y)).then((function(e){if(console.log(e),200===e.status){var t=e.data.cardnum;h(null!==t&&void 0!==t?t:"")}})).catch((function(e){console.log(e)}))}),[]),l.a.createElement(V.a,{size:"tiny",open:r,onClose:function(){return c(!1)},trigger:l.a.createElement(z.a,{animated:"vertical",color:"teal",disabled:0===Object.keys(e.selectedFoodItems).length,onClick:function(){return c(!0)}},l.a.createElement(z.a.Content,{hidden:!0},"Checkout"),l.a.createElement(z.a.Content,{visible:!0},l.a.createElement(E.a,{name:"shop"})))},l.a.createElement(V.a.Header,null,e.restaurant),l.a.createElement(V.a.Content,null,l.a.createElement(V.a.Description,null,l.a.createElement(d.a,null,"Order Summary"),l.a.createElement("strong",null,"Deliver to: ",e.deliveryInfo.location))),l.a.createElement(V.a.Content,null,l.a.createElement(V.a.Description,null,Object.entries(e.selectedFoodItems).map((function(e){var t=e[0],a=e[1];return l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},"".concat(a.quantity,"x ").concat(t),l.a.createElement("span",null,"$",(a.quantity*a.price).toFixed(2)))})))),l.a.createElement(V.a.Content,null,l.a.createElement(V.a.Description,null,l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},"Subtotal",l.a.createElement("span",null,"$",e.subtotal)),l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},"Delivery fee",l.a.createElement("span",null,"$",e.deliveryInfo.deliveryFee.toFixed(2))),l.a.createElement("br",null),l.a.createElement("strong",null,l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},"Total",l.a.createElement("span",null,"$",e.total))))),l.a.createElement(V.a.Content,null,l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},b?"Pay by card":"No registered card (pay by cash)",l.a.createElement("span",null,l.a.createElement(B.a,{toggle:!0,disabled:!b,onClick:function(){return f(Math.abs(s-1))}})))),l.a.createElement(V.a.Actions,null,l.a.createElement(z.a,{color:"red",content:"Cancel",onClick:function(){return c(!1)}}),l.a.createElement(z.a,{color:"green",content:"Place Order",loading:w,onClick:function(){!function(){C(!0),console.log("selected food items",e.selectedFoodItems);var t=Object(J.a)(new Date),a="http://localhost:5000/api/riders/order?time=".concat(t);Y.a.get(a).then((function(a){var n=a.data.rid;0==n.length&&(console.log("No riders available at this time!"),console.log("Assigning to default rider:")),console.log("Riders available:",n);var l=[],r=e.selectedFoodItems;for(var c in r)if(r.hasOwnProperty(c)){var o=r[c],i={};i.fname="'".concat(o.name,"'"),i.qty="".concat(o.quantity),i.itemprice="".concat(o.price),l.push(i)}console.log(l);Y.a.post("http://localhost:5000/api/orders",{location:"'".concat(e.deliveryInfo.location,"'"),dfee:"'".concat(e.deliveryInfo.deliveryFee,"'"),odatetime:"".concat(t),cid:"".concat(y),paymethod:"".concat(s),rname:"'".concat(e.restaurant,"'"),fprice:"".concat(e.subtotal),rid:"".concat(127),foodlist:l}).then((function(e){console.log("'Successfully created order",e),C(!1),x.push("/history")})).catch((function(e){C(!1),console.log("Error occured while making an order",e)}))})).catch((function(e){console.log("Unable to get riders working at this time:",e)}))}()}})))},Q=a(732),X=a(742);var Z=function(e){var t=Object(n.useState)(0),a=Object(o.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(0),m=Object(o.a)(i,2),u=m[0],s=m[1],d=Object(n.useState)({}),f=Object(o.a)(d,2),g=f[0],p=f[1],b=Object(n.useState)([]),h=Object(o.a)(b,2),y=h[0],v=h[1],j=Object(n.useState)(!0),O=Object(o.a)(j,2),w=O[0],C=O[1],x=e.restaurant,D=Object(J.a)(Object(Q.a)(Object(X.a)(),10)),F=Object(J.a)(Object(Q.a)(Object(X.a)(),22));Object(n.useEffect)((function(){var e="http://localhost:5000/api/restaurants/'".concat(x,"'?start=").concat(D,"&end=").concat(F);Y.a.get(e).then((function(e){var t=[];e.data.forEach((function(e){var a={};a.name=e.fname,a.limit=parseInt(e.qtylefttoday),a.imgurl=e.imgurl,a.price=parseFloat(e.price),a.category=e.categories[0],t.push(a)})),v(t),C(!1),console.log("Retrieved restaurant food items:",t)})).catch((function(e){console.log(x),console.log("Error retrieving restaurant items:",e)}))}),[]);var M=function(e){void 0===g[e.name]?g[e.name]=e:e.quantity<=0?delete g[e.name]:g[e.name].quantity=e.quantity,p(g),I()},I=function(){for(var t=0,a=0,n=Object.entries(g);a<n.length;a++){var l=Object(o.a)(n[a],2),r=(l[0],l[1]);t+=r.quantity*r.price}s(t),c(t+e.deliveryInfo.deliveryFee)};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.a.createElement("h1",null,e.restaurant),l.a.createElement("span",null,l.a.createElement(S.a,{labelPosition:"left",type:"text",fluid:!0},l.a.createElement(H.a,{basic:!0},"$"),l.a.createElement("input",{disabled:!0,style:{opacity:"1"},value:u.toFixed(2)})),l.a.createElement(z.a.Group,{widths:"2",style:{minWidth:"20vw"}},l.a.createElement(K,{subtotal:u.toFixed(2),total:r.toFixed(2),restaurant:e.restaurant,deliveryInfo:e.deliveryInfo,selectedFoodItems:g}),l.a.createElement(z.a,{animated:"fade",onClick:function(){return e.setSelectedRestaurant("")},color:"red"},l.a.createElement(z.a.Content,{visible:!0},l.a.createElement(E.a,{name:"close"})),l.a.createElement(z.a.Content,{hidden:!0,content:"Cancel"}))))),w?l.a.createElement(k.a,{size:"massive",basic:!0,placeholder:!0,loading:w,textAlign:"center"}):l.a.createElement($.a.Group,{divided:!0},y.map((function(e,t){return l.a.createElement(U,{key:t,name:e.name,price:e.price,category:e.category,limit:e.limit,count:0,updateSelectedFoodItems:M,imgurl:e.imgurl})}))))};var ee=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),i=Object(o.a)(c,2),m=i[0],u=i[1];return l.a.createElement("main",{className:"homepage"},l.a.createElement(s.a,{size:"huge",style:{opacity:0}}),l.a.createElement(C.a,null,""===a?l.a.createElement(N,{location:m,setLocation:u,setSelectedRestaurant:r}):l.a.createElement(Z,{deliveryInfo:{location:m,deliveryFee:3.99},restaurant:a,setSelectedRestaurant:r})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null))},te=a(729);var ae=function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(e.review),m=Object(o.a)(i,2),u=m[0],s=m[1];return l.a.createElement(V.a,{open:r,onClose:function(){return c(!1)},trigger:l.a.createElement(z.a,{as:H.a,color:"teal",onClick:function(){return c(!0)},content:"Review",style:e.style})},l.a.createElement(V.a.Header,null,"Review for ",e.rname),l.a.createElement(V.a.Content,null,l.a.createElement(te.a,null,l.a.createElement(te.a.TextArea,{placeholder:"Write your review...",value:u,onChange:function(e,t){s(t.value)}}))),l.a.createElement(V.a.Actions,null,l.a.createElement(z.a,{color:"red",content:"Cancel",onClick:function(){return c(!1)}}),l.a.createElement(z.a,{color:"green",content:"Submit",disabled:!u,onClick:function(){var t;t={review:"'".concat(u,"'"),oid:e.oid,reviewdatetime:Object(J.a)(new Date)},console.log(t),Y.a.post("http://localhost:5000/api/customers/review",t).then((function(e){console.log("Successfully added review",e)})).catch((function(e){console.log("Error adding review",e)})),c(!1)}})))};var ne=function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),r=a[0],c=a[1],i=e.order,m=Object(n.useState)(i.rating),u=Object(o.a)(m,2),s=u[0],d=(u[1],function(){switch(i.status){case 0:return["Processing","yellow"];case 1:return["Delivering","blue"];case 2:return["Delivered","green"];case 3:return["Cancelled","grey"];default:return console.log("Unknown status"),["Unknown","black"]}});return l.a.createElement(F.a,{fluid:!0,raised:!0,color:d()[1]},l.a.createElement(F.a.Content,null,l.a.createElement(F.a.Header,{style:{display:"flex",justifyContent:"space-between"}},i.rname,l.a.createElement("span",null,"$",(i.fprice+i.dfee).toFixed(2)))),l.a.createElement(F.a.Content,null,l.a.createElement(F.a.Description,null,Object(T.a)(1e3*i.odatetime,"MM/dd/yyyy hh:mm aa"),l.a.createElement(H.a,{color:[d()[1]],style:{marginLeft:"1rem"}},d()[0]),2===i.status&&l.a.createElement(l.a.Fragment,null,l.a.createElement(ae,{style:{marginLeft:"1rem",marginRight:"1rem"},oid:i.oid,rname:i.rname,review:i.review}),l.a.createElement(I.a,{icon:"star",maxRating:5,defaultRating:s,onRate:function(e,t){var a=t.rating;t.MaxRating;console.log("Rate clicked:",a);Y.a.post("http://localhost:5000/api/customers/rating",{rating:"".concat(a),oid:"".concat(i.oid)}).then((function(e){console.log("Successfully updated rating for order",e)})).catch((function(e){console.log("Error updating rating for order",e)}))}})),l.a.createElement(z.a,{primary:!0,floated:"right",onClick:function(){return c(!r)}},r?"View less":"View more"),i.status<2&&l.a.createElement(z.a,{secondary:!0,floated:"right",content:"Cancel"})),r&&l.a.createElement(F.a.Description,null,"Order number: ",i.oid,l.a.createElement("br",null),"Delivery address: ",e.order.location)),r&&l.a.createElement(l.a.Fragment,null,l.a.createElement(F.a.Content,null,l.a.createElement(F.a.Description,null,i.items.map((function(e,t){return l.a.createElement("div",{key:t,style:{display:"flex",justifyContent:"space-between"}},"".concat(e.qty,"x ").concat(e.fname),l.a.createElement("span",null,"$",(e.qty*e.price).toFixed(2)))})))),l.a.createElement(F.a.Content,null,l.a.createElement(F.a.Description,null,l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},"Subtotal",l.a.createElement("span",null,"$",i.fprice.toFixed(2))),l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},"Delivery fee",l.a.createElement("span",null,"$",i.dfee.toFixed(2))),l.a.createElement("br",null),l.a.createElement("strong",null,l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},"Total",l.a.createElement("span",null,"$",(i.fprice+i.dfee).toFixed(2))))))))};var le=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!0),i=Object(o.a)(c,2),m=i[0],u=i[1],d=Object(n.useContext)(O).uid;return Object(n.useEffect)((function(){var e="http://localhost:5000/api/customers/".concat(d,"/orders");Y.a.get(e).then((function(e){console.log("response",e.data),r(e.data),u(!1)})).catch((function(e){console.log("Error retrieving past orders:",e)}))}),[]),l.a.createElement("main",{className:"history-page"},l.a.createElement(s.a,{size:"huge",style:{opacity:0}}),l.a.createElement(C.a,null,l.a.createElement("h1",null,"Past Orders"),m?l.a.createElement(k.a,{size:"massive",basic:!0,placeholder:!0,loading:m,textAlign:"center"}):a.length>0?l.a.createElement(F.a.Group,null,a.map((function(e,t){return console.log(a),l.a.createElement(ne,{key:t,order:e})}))):l.a.createElement(k.a,{size:"massive",basic:!0,placeholder:!0,textAlign:"center",content:"You have no past orders"})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null))},re=a(425),ce=a(730);var oe=function(){var e=Object(n.useContext)(O),t=e.uid,a=e.name,r=e.email,c=e.reload,i=Object(n.useState)(!1),m=Object(o.a)(i,2),u=m[0],s=m[1],E=Object(n.useState)(""),f=Object(o.a)(E,2),g=f[0],p=f[1],b=Object(n.useState)(""),h=Object(o.a)(b,2),y=h[0],v=h[1],j=Object(n.useState)(""),w=Object(o.a)(j,2),C=w[0],x=w[1],S=Object(n.useState)(!1),D=Object(o.a)(S,2),k=D[0],F=D[1],M=Object(n.useState)(!1),I=Object(o.a)(M,2),V=I[0],L=I[1],T=function(){p(a),v(r),x("password")};return Object(n.useEffect)((function(){T()}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement(te.a,null,l.a.createElement(d.a,null,"Account Information"),l.a.createElement(te.a.Input,{label:"Name",icon:"user",iconPosition:"left",value:g,onChange:function(e,t){p(t.value)},disabled:!u}),l.a.createElement(te.a.Input,{label:"Email",icon:"mail",iconPosition:"left",type:"email",value:y,onChange:function(e,t){v(t.value)},disabled:!u}),l.a.createElement(te.a.Input,{label:"Password",icon:"lock",iconPosition:"left",type:u?"text":"password",value:C,onChange:function(e,t){x(t.value)},disabled:!u}),l.a.createElement(z.a.Group,{widths:"2"},l.a.createElement(z.a,{content:u?"Cancel":"Edit",secondary:!0,onClick:function(){!u&&F(!1),u&&T(),s(!u)}}),l.a.createElement(z.a,{content:"Confirm",primary:!0,disabled:!u,loading:V,onClick:function(){L(!0),Y.a.put("http://localhost:5000/api/users/".concat(t),{name:g,email:y}).then((function(e){200===e.status&&(s(!1),F(!0),localStorage.setItem("name",g),localStorage.setItem("email",y),c()),L(!1)})).catch((function(e){console.log(e),L(!1)}))}}))),k&&l.a.createElement(ce.a,{success:!0,content:"Successfully updated"}))},ie=a(433),me=a(731);var ue=function(){var e=Object(n.useContext)(O).uid,t=Object(n.useState)(!1),a=Object(o.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(""),m=Object(o.a)(i,2),u=m[0],s=m[1],f=Object(n.useState)(""),g=Object(o.a)(f,2),p=g[0],b=g[1],h=Object(n.useState)(!1),y=Object(o.a)(h,2),v=y[0],j=y[1],w=Object(n.useState)(!0),C=Object(o.a)(w,2),x=C[0],S=C[1],D=Object(n.useState)(!1),k=Object(o.a)(D,2),F=k[0],M=k[1],I=Object(n.useState)(""),V=Object(o.a)(I,2),L=V[0],T=V[1];return Object(n.useEffect)((function(){Y.a.get("http://localhost:5000/api/customers/".concat(e)).then((function(e){if(console.log(e),200===e.status){var t=e.data,a=t.cardnum,n=t.rpoints;s(null!==a&&void 0!==a?a:""),b(null!==a&&void 0!==a?a:""),T(n)}S(!1)})).catch((function(e){console.log(e)}))}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement(te.a,null,l.a.createElement(d.a,null,"Reward Points"),l.a.createElement(ie.a,{size:"small"},l.a.createElement(ie.a.Value,null,x?l.a.createElement(me.a,{active:!0,inline:!0}):L," ",l.a.createElement(E.a,{name:"star"}))),l.a.createElement(d.a,null,"Registered Card"),l.a.createElement(te.a.Input,{label:"Card Number",icon:"credit card",iconPosition:"left",value:p,onChange:function(e,t){return b(t.value)},disabled:!r,loading:x}),l.a.createElement(z.a.Group,{widths:"2"},l.a.createElement(z.a,{content:r?"Cancel":"Edit",secondary:!0,onClick:function(){!r&&j(!1),r&&b(u),c(!r)}}),l.a.createElement(z.a,{content:"Confirm",primary:!0,disabled:!r,loading:F,onClick:function(){var t=""===p?0:parseInt(p);t>=0&&(M(!0),Y.a.put("http://localhost:5000/api/customers/".concat(e),{cardnum:t}).then((function(e){200===e.status&&(s(p),c(!1),j(!0)),M(!1)})).catch((function(e){console.log(e),M(!1)})))}}))),v&&l.a.createElement(ce.a,{success:!0,content:"Successfully updated"}))};var se=function(){var e=Object(n.useContext)(O).role;return l.a.createElement("main",{className:"profile-page"},l.a.createElement(s.a,{size:"huge",style:{opacity:0}}),l.a.createElement(C.a,null,l.a.createElement("h1",null,"Profile"),l.a.createElement(k.a,{raised:!0},l.a.createElement(re.a,{columns:0===e?2:1,stackable:!0},l.a.createElement(re.a.Column,{verticalAlign:"middle",style:{display:"flex",alignItems:"center"}},l.a.createElement(oe,null)),0===e&&l.a.createElement(re.a.Column,{verticalAlign:"middle",style:{display:"flex",alignItems:"center"}},l.a.createElement(ue,null))))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null))},de=a(426);var Ee=function(e){var t=Object(n.useState)(e.order.departdatetime1),a=Object(o.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(e.order.arrivedatetime),m=Object(o.a)(i,2),u=m[0],s=m[1],d=Object(n.useState)(e.order.departdatetime2),E=Object(o.a)(d,2),f=E[0],g=E[1],p=Object(n.useState)(e.order.deliverdatetime),b=Object(o.a)(p,2),h=b[0],y=b[1],v=Object(n.useState)(!1),j=Object(o.a)(v,2),O=j[0],w=j[1],C=null!=r,x=null!=u,S=null!=f,D=null!=h,k=function(t){var a="http://localhost:5000/api/orders/".concat(e.order.oid),n=Object(J.a)(new Date);Y.a.put(a,{timestamp:"".concat(n),type:"".concat(t)}).then((function(t){console.log("Successfully updated status of order",t.data),e.refreshOrders()})).catch((function(e){console.log("Error occured updating order status",e)}))};return console.log(e.order),l.a.createElement(F.a,{fluid:!0,raised:!0},l.a.createElement(F.a.Content,null,l.a.createElement(F.a.Header,null,"Order ",e.order.oid,": ",e.order.rname),l.a.createElement(F.a.Content,{style:{float:"left"}},l.a.createElement(F.a.Description,null,"Time: ",Object(T.a)(1e3*e.order.odatetime,"MM/dd/yyyy hh:mm aa")),l.a.createElement(F.a.Description,null,"Customer: ",e.order.cname),l.a.createElement(F.a.Description,null,"Deliver to: ",e.order.location)),l.a.createElement(z.a,{primary:!0,floated:"right",onClick:function(){return w(!O)}},O?"View less":"View more")),O&&l.a.createElement(l.a.Fragment,null,l.a.createElement(F.a.Content,null,l.a.createElement(F.a.Description,null,e.order.items.map((function(e,t){return l.a.createElement("div",{key:t,style:{display:"flex",justifyContent:"space-between"}},"".concat(e.qty,"x ").concat(e.fname),l.a.createElement("span",null,"$",(e.qty*e.price).toFixed(2)))})))),l.a.createElement(F.a.Content,null,l.a.createElement(F.a.Description,null,l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},"Subtotal",l.a.createElement("span",null,"$",e.order.fprice.toFixed(2))),l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},"Delivery fee",l.a.createElement("span",null,"$",e.order.dfee.toFixed(2))),l.a.createElement("br",null),l.a.createElement("strong",null,l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},"Total",l.a.createElement("span",null,"$",(e.order.fprice+e.order.dfee).toFixed(2))))))),l.a.createElement("div",null,l.a.createElement(de.a.Group,{ordered:!0,widths:"4"},l.a.createElement(de.a,{completed:C},l.a.createElement(de.a.Content,{style:{display:"flex",flexDirection:"column"}},l.a.createElement(de.a.Title,null,"Depart for Restaurant"),l.a.createElement(z.a,{style:{marginTop:"0.5em",marginRight:"0"},compact:!0,content:"Accept",color:"green",onClick:function(){var e=new Date;k(1),c(Object(J.a)(e))},disabled:C}),C,C&&l.a.createElement(de.a.Description,null,"Completed on:"," ",Object(T.a)(1e3*r,"dd/MM/yyyy HH:mm:ss")))),l.a.createElement(de.a,{completed:x},l.a.createElement(de.a.Content,{style:{display:"flex",flexDirection:"column"}},l.a.createElement(de.a.Title,null,"Arrived at restaurant"),l.a.createElement(de.a.Description,null,"Collect customer's food from restaurant"),C&&l.a.createElement(z.a,{style:{marginTop:"0.5em",marginRight:"0"},compact:!0,content:"Done",color:"green",onClick:function(){var e=new Date;k(2),s(Object(J.a)(e))},disabled:x}),x&&l.a.createElement(de.a.Description,null,"Completed on:"," ",Object(T.a)(1e3*u,"dd/MM/yyyy HH:mm:ss")))),l.a.createElement(de.a,{completed:S},l.a.createElement(de.a.Content,{style:{display:"flex",flexDirection:"column"}},l.a.createElement(de.a.Title,null,"Received food and left restaurant"),l.a.createElement(de.a.Description,null,"Food ready to be delivered to customer"),x&&l.a.createElement(z.a,{style:{marginTop:"0.5em",marginRight:"0"},compact:!0,content:"Done",color:"green",onClick:function(){var e=new Date;k(3),g(Object(J.a)(e))},disabled:S}),S&&l.a.createElement(de.a.Description,null,"Completed on:"," ",Object(T.a)(1e3*f,"dd/MM/yyyy HH:mm:ss")))),l.a.createElement(de.a,{completed:D},l.a.createElement(de.a.Content,{style:{display:"flex",flexDirection:"column"}},l.a.createElement(de.a.Title,null,"Deliver to customer"),l.a.createElement(de.a.Description,null,"Go to the customer's location"),S&&l.a.createElement(z.a,{style:{marginTop:"0.5em",marginRight:"0"},compact:!0,content:"Done",color:"green",onClick:function(){var e=new Date;k(4),y(Object(J.a)(e))},disabled:D}),D&&l.a.createElement(de.a.Description,null,"Completed on:"," ",Object(T.a)(1e3*h,"dd/MM/yyyy HH:mm:ss")))))))};var fe=function(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)({}),i=Object(o.a)(c,2),m=i[0],u=i[1],d=Object(n.useContext)(O).uid,E=function(){var e="http://localhost:5000/api/riders/".concat(d,"/orders");Y.a.get(e).then((function(e){console.log("Fetch all orders for rider ".concat(d),e.data);var t={};e.data.forEach((function(e){return t[e.oid]=e})),u(t),r(!1)})).catch((function(e){console.log("Error fetching orders for rider",e)}))};return Object(n.useEffect)((function(){E()}),[]),l.a.createElement("main",{className:"rider-activity-page"},l.a.createElement(s.a,{size:"huge",style:{opacity:0}}),l.a.createElement(C.a,null,l.a.createElement("h1",null,"Activity"),Object.keys(m).length>0?l.a.createElement(F.a.Group,null,Object.entries(m).map((function(e){var t=e[1];return l.a.createElement(Ee,{refreshOrders:E,order:t})}))):l.a.createElement(k.a,{raised:!0,placeholder:!0,textAlign:"center",size:"big",loading:a},"You currently do not have any activity")),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null))},ge=a(88),pe=a(737),be=a(733);var he=function(e,t,a,l,r,c){var i=Object(n.useState)([]),m=Object(o.a)(i,2),u=(m[0],m[1],"http://localhost:5000/api/riders/".concat(c,"/summary"));Object(n.useEffect)((function(){Y.a.get(u).then((function(t){console.log("response",t.data),e(t.data)})).catch((function(e){console.log("Error retrieving rider summary data:",e)}))}),[]);var s="http://localhost:5000/api/riders/".concat(c,"/salary");Object(n.useEffect)((function(){Y.a.get(s).then((function(e){console.log("response",e.data),t(e.data)})).catch((function(e){console.log("Error retrieving order data:",e)}))}),[]);var d="http://localhost:5000/api/riders/".concat(c,"/schedule");Object(n.useEffect)((function(){Y.a.get(d).then((function(e){console.log("response",e.data),a(e.data)})).catch((function(e){console.log("Error retrieving rider schedule:",e)}))}),[]);var E="http://localhost:5000/api/riders/".concat(c,"/orders");Object(n.useEffect)((function(){Y.a.get(E).then((function(e){console.log("response",e.data),l(e.data)})).catch((function(e){console.log("Error retrieving rider's order data:",e)}))}),[]);var f="http://localhost:5000/api/riders/".concat(c,"/ratings");Object(n.useEffect)((function(){Y.a.get(f).then((function(e){console.log("response",e.data),r(e.data)})).catch((function(e){console.log("Error retrieving rider's ratings :",e)}))}),[])};var ye=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)([]),i=Object(o.a)(c,2),m=(i[0],i[1]),u=Object(n.useState)([]),d=Object(o.a)(u,2),f=d[0],g=d[1],p=Object(n.useState)([]),b=Object(o.a)(p,2),h=b[0],y=b[1],v=Object(n.useState)([]),j=Object(o.a)(v,2),w=j[0],x=j[1],S=Object(n.useState)([]),D=Object(o.a)(S,2),k=D[0],F=D[1],M=Object(n.useContext)(O).uid,I=function(e){var t=e.split(" - ");if(console.log(t),t.length<2||""===t[0]||""===t[1])return console.log("period invalid"),[];var a=Object(pe.a)(t[0],"MM/yyyy",new Date),n=Object(pe.a)(t[1],"MM/yyyy",new Date);if(Object(be.a)(n,a)){var l=[n,a];a=l[0],n=l[1]}return[a,n]}(a),V=new Date(new Date-I[0]).getMonth()+1,z=Math.round((new Date-I[0])/6048e5)+1;return he(m,g,y,x,F,M),l.a.createElement("main",{className:"rider-summary-page"},l.a.createElement(s.a,{size:"huge",style:{opacity:0}}),l.a.createElement(C.a,null,l.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},l.a.createElement("h1",{style:{marginInlineEnd:"1rem"}},"Performance summary for"),l.a.createElement(ge.MonthRangeInput,{className:"rounded-input",clearable:!0,placeholder:"Select month(s)",popupPosition:"bottom center",onChange:function(e,t){r(t.value)},dateFormat:"MM/YYYY",value:a,closable:!0,maxDate:new Date})),I.length>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Period"," ",l.a.createElement("font",{color:"#3445c3"},Object(T.a)(I[0],"MMM yyyy"))," to"," ",l.a.createElement("font",{color:"#3445c3"},Object(T.a)(I[1],"MMM yyyy"))),l.a.createElement(ie.a.Group,{widths:"3",size:"large",style:{margin:"1em 0 1em 0"}},l.a.createElement(ie.a,null,l.a.createElement(ie.a.Label,null,"Total earnings"),l.a.createElement(ie.a.Value,null,l.a.createElement(E.a,{name:"dollar"}),f.filter((function(e){return new Date(e.st_mth_wk).getMonth()>=new Date(I[0]).getMonth()&&new Date(e.st_mth_wk).getMonth()<=new Date(I[1]).getMonth()&&new Date(e.st_mth_wk).getFullYear()>=new Date(I[0]).getFullYear()&&new Date(e.st_mth_wk).getFullYear()<=new Date(I[1]).getFullYear()})).reduce((function(e,t){return(parseFloat(e)+parseFloat(t.sal)).toFixed(2)}),0))),l.a.createElement(ie.a,null,l.a.createElement(ie.a.Label,null,"Average earnings per month"),l.a.createElement(ie.a.Value,null,l.a.createElement(E.a,{name:"dollar"}),(f.filter((function(e){return new Date(e.st_mth_wk).getMonth()>=new Date(I[0]).getMonth()&&new Date(e.st_mth_wk).getMonth()<=new Date(I[1]).getMonth()&&new Date(e.st_mth_wk).getFullYear()>=new Date(I[0]).getFullYear()&&new Date(e.st_mth_wk).getFullYear()<=new Date(I[1]).getFullYear()})).reduce((function(e,t){return parseFloat(e)+parseFloat(t.sal)}),0)/V).toFixed(2))),l.a.createElement(ie.a,null,l.a.createElement(ie.a.Label,null,"Average earnings per week"),l.a.createElement(ie.a.Value,null,l.a.createElement(E.a,{name:"dollar"}),(f.filter((function(e){return new Date(e.st_mth_wk).getMonth()>=new Date(I[0]).getMonth()&&new Date(e.st_mth_wk).getMonth()<=new Date(I[1]).getMonth()&&new Date(e.st_mth_wk).getFullYear()>=new Date(I[0]).getFullYear()&&new Date(e.st_mth_wk).getFullYear()<=new Date(I[1]).getFullYear()})).reduce((function(e,t){return parseFloat(e)+parseFloat(t.sal)}),0)/z).toFixed(2)))),l.a.createElement(ie.a.Group,{widths:"3",size:"large",style:{margin:"1em 0 1em 0"}},l.a.createElement(ie.a,null,l.a.createElement(ie.a.Label,null,"Total hours"),l.a.createElement(ie.a.Value,null,l.a.createElement(E.a,{name:"time"}),h.filter((function(e){return new Date(e.sc_date).getMonth()>=new Date(I[0]).getMonth()&&new Date(e.sc_date).getMonth()<=new Date(I[1]).getMonth()&&new Date(e.sc_date).getFullYear()>=new Date(I[0]).getFullYear()&&new Date(e.sc_date).getFullYear()<=new Date(I[1]).getFullYear()})).reduce((function(e,t){return parseInt(e)+(parseInt(t.e_time)-parseInt(t.st_time))}),0))),l.a.createElement(ie.a,null,l.a.createElement(ie.a.Label,null,"Average hours per month"),l.a.createElement(ie.a.Value,null,l.a.createElement(E.a,{name:"time"}),+(h.filter((function(e){return new Date(e.sc_date).getMonth()>=new Date(I[0]).getMonth()&&new Date(e.sc_date).getMonth()<=new Date(I[1]).getMonth()&&new Date(e.sc_date).getFullYear()>=new Date(I[0]).getFullYear()&&new Date(e.sc_date).getFullYear()<=new Date(I[1]).getFullYear()})).reduce((function(e,t){return parseInt(e)+(parseInt(t.e_time)-parseInt(t.st_time))}),0)/V).toFixed(2))),l.a.createElement(ie.a,null,l.a.createElement(ie.a.Label,null,"Average hours per week"),l.a.createElement(ie.a.Value,null,l.a.createElement(E.a,{name:"time"}),+(h.filter((function(e){return new Date(e.sc_date).getMonth()>=new Date(I[0]).getMonth()&&new Date(e.sc_date).getMonth()<=new Date(I[1]).getMonth()&&new Date(e.sc_date).getFullYear()>=new Date(I[0]).getFullYear()&&new Date(e.sc_date).getFullYear()<=new Date(I[1]).getFullYear()})).reduce((function(e,t){return parseInt(e)+(parseInt(t.e_time)-parseInt(t.st_time))}),0)/z).toFixed(2)))),l.a.createElement(ie.a.Group,{widths:"3",size:"large",style:{margin:"1em 0 1em 0"}},l.a.createElement(ie.a,null,l.a.createElement(ie.a.Label,null,"Total orders"),l.a.createElement(ie.a.Value,null,l.a.createElement(E.a,{name:"truck"}),w.filter((function(e){return new Date(1e3*e.odatetime).getMonth()>=new Date(I[0]).getMonth()&&new Date(1e3*e.odatetime).getMonth()<=new Date(I[1]).getMonth()&&new Date(1e3*e.odatetime).getFullYear()>=new Date(I[0]).getFullYear()&&new Date(1e3*e.odatetime).getFullYear()<=new Date(I[1]).getFullYear()})).length)),l.a.createElement(ie.a,null,l.a.createElement(ie.a.Label,null,"Average orders per month"),l.a.createElement(ie.a.Value,null,l.a.createElement(E.a,{name:"truck"}),+(w.filter((function(e){return new Date(1e3*e.odatetime).getMonth()>=new Date(I[0]).getMonth()&&new Date(1e3*e.odatetime).getMonth()<=new Date(I[1]).getMonth()&&new Date(1e3*e.odatetime).getFullYear()>=new Date(I[0]).getFullYear()&&new Date(1e3*e.odatetime).getFullYear()<=new Date(I[1]).getFullYear()})).length/V).toFixed(2))),l.a.createElement(ie.a,null,l.a.createElement(ie.a.Label,null,"Average orders per week"),l.a.createElement(ie.a.Value,null,l.a.createElement(E.a,{name:"truck"}),+(w.filter((function(e){return new Date(1e3*e.odatetime).getMonth()>=new Date(I[0]).getMonth()&&new Date(1e3*e.odatetime).getMonth()<=new Date(I[1]).getMonth()&&new Date(1e3*e.odatetime).getFullYear()>=new Date(I[0]).getFullYear()&&new Date(1e3*e.odatetime).getFullYear()<=new Date(I[1]).getFullYear()})).length/z).toFixed(2)))),l.a.createElement(ie.a.Group,{widths:"2",size:"large",style:{margin:"1em 0 1em 0"}},l.a.createElement(ie.a,{color:"violet"},l.a.createElement(ie.a.Label,null,"Total ratings"),l.a.createElement(ie.a.Value,null,l.a.createElement(E.a,{name:"star"}),k.length)),l.a.createElement(ie.a,{color:"violet"},l.a.createElement(ie.a.Label,null,"Average ratings"),l.a.createElement(ie.a.Value,null,l.a.createElement(E.a,{name:"star"}),+(k.reduce((function(e,t){return parseInt(e)+parseInt(t.rating)}),0)/k.length).toFixed(2)))))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null))},ve=a(734),je=a(735),Oe=a(736),we=a(743),Ce=["10% off on all food (14/2/2020 - 14/3/2020)","Free delivery (19/2/2020 - 31/3/2020)","5% off on all food (15/3/2020 - 15/4/2020)"];var xe=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),i=Object(o.a)(c,2),m=i[0],u=i[1],d=Object(n.useState)([]),f=Object(o.a)(d,2),g=f[0],p=f[1],b=Object(n.useState)({}),h=Object(o.a)(b,2),y=h[0],v=h[1],j=Object(n.useContext)(O).uid,w=Object(n.useState)(!1),x=Object(o.a)(w,2),S=x[0],D=x[1],F=Object(n.useState)(!0),M=Object(o.a)(F,2),I=M[0],V=M[1];Object(n.useEffect)((function(){Y.a.get("http://localhost:5000/api/staffs/".concat(j)).then((function(e){console.log(e);var t=e.data.rname;u(t),V(!1)})).catch((function(e){console.log("Error",e)}))}),[]);var z=function(e){r(e),p({});var t=e.split(" - ");if(console.log(t),t.length<2||""===t[0]||""===t[1])return console.log("period invalid"),[];var a=Object(pe.a)(t[0],"MM/yyyy",new Date),n=Object(pe.a)(t[1],"MM/yyyy",new Date);if(Object(be.a)(n,a)){var l=[n,a];a=l[0],n=l[1]}!function(e,t){D(!0),console.log("Fetch some info!"),console.log(e,t);var a=Object(J.a)(e),n=Object(J.a)(t);console.log("Start unix time",a);var l="http://localhost:5000/api/restaurants/".concat(m,"/summary?starttime=").concat(a,"&endtime=").concat(n);Y.a.get(l).then((function(a){var n=a.data.rsummary;console.log(n),v(n),p([e,t]),D(!1)})).catch((function(e){console.log("Error",e),D(!1)}))}(Object(ve.a)(a),Object(je.a)(n))},L=function(){return y.totalrevenue},A=function(){return y.ordercount},R=y.popularitems;return l.a.createElement("main",{className:"staff-summary-page"},l.a.createElement(s.a,{size:"huge",style:{opacity:0}}),l.a.createElement(C.a,null,l.a.createElement("h1",null,I?l.a.createElement(me.a,{inline:!0,active:!0}):m),l.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},l.a.createElement("h2",{style:{marginInlineEnd:"1rem"}},"Summary for"),l.a.createElement(ge.MonthRangeInput,{className:"rounded-input",clearable:!0,placeholder:"Select month(s)",popupPosition:"bottom center",onChange:function(e,t){z(t.value)},value:a,dateFormat:"MM/YYYY",closable:!0,maxDate:new Date,disabled:I,loading:I})),2===g.length?l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Period"," ",l.a.createElement("font",{color:"#3445c3"},Object(T.a)(g[0],"MMM yyyy"))," to"," ",l.a.createElement("font",{color:"#3445c3"},Object(T.a)(g[1],"MMM yyyy"))),l.a.createElement(ie.a.Group,{widths:"3",size:"large",style:{margin:"1em 0 1em 0"}},l.a.createElement(ie.a,null,l.a.createElement(ie.a.Label,null,"Total revenue"),l.a.createElement(ie.a.Value,null,l.a.createElement(E.a,{name:"dollar"}),L().toFixed(2))),l.a.createElement(ie.a,null,l.a.createElement(ie.a.Label,null,"Average revenue per month"),l.a.createElement(ie.a.Value,null,l.a.createElement(E.a,{name:"dollar"}),function(){var e=Object(Oe.a)(g[1],g[0])+1;return console.log(e),L()/e}().toFixed(2))),l.a.createElement(ie.a,null,l.a.createElement(ie.a.Label,null,"Average revenue per week"),l.a.createElement(ie.a.Value,null,l.a.createElement(E.a,{name:"dollar"}),function(){var e=Object(we.a)(g[1],g[0]);return L()/e}().toFixed(2)))),l.a.createElement(ie.a.Group,{widths:"3",size:"large",style:{margin:"1em 0 1em 0"}},l.a.createElement(ie.a,null,l.a.createElement(ie.a.Label,null,"Total orders"),l.a.createElement(ie.a.Value,null,l.a.createElement(E.a,{name:"food"}),A().toFixed(0))),l.a.createElement(ie.a,null,l.a.createElement(ie.a.Label,null,"Average orders per month"),l.a.createElement(ie.a.Value,null,l.a.createElement(E.a,{name:"food"}),function(){var e=Object(Oe.a)(g[1],g[0])+1;return A()/e}().toFixed(2))),l.a.createElement(ie.a,null,l.a.createElement(ie.a.Label,null,"Average orders per week"),l.a.createElement(ie.a.Value,null,l.a.createElement(E.a,{name:"food"}),function(){var e=Object(we.a)(g[1],g[0]);return A()/e}().toFixed(2)))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(ie.a.Group,{widths:"1",size:"huge"},l.a.createElement(ie.a,null,l.a.createElement(ie.a.Label,null,"Top"),l.a.createElement(ie.a.Value,{text:!0},"Top Food"))),R&&l.a.createElement(ie.a.Group,{widths:R.length,size:"tiny"},R.length>=1&&l.a.createElement(ie.a,null,l.a.createElement(ie.a.Value,null,"1st"),l.a.createElement(ie.a.Value,{text:!0},l.a.createElement("font",{color:"#643cc6"},R[0].fname)),l.a.createElement(ie.a.Label,null,R[0].sum," Orders")),R.length>=2&&l.a.createElement(ie.a,null,l.a.createElement(ie.a.Value,null,"2nd"),l.a.createElement(ie.a.Value,{text:!0},l.a.createElement("font",{color:"#643cc6"},R[1].fname)),l.a.createElement(ie.a.Label,null,R[1].sum," Orders")),R.length>=3&&l.a.createElement(ie.a,null,l.a.createElement(ie.a.Value,null,"3rd"),l.a.createElement(ie.a.Value,{text:!0},l.a.createElement("font",{color:"#643cc6"},R[2].fname)),l.a.createElement(ie.a.Label,null,R[2].sum," Orders")),R.length>=4&&l.a.createElement(ie.a,null,l.a.createElement(ie.a.Value,null,"4th"),l.a.createElement(ie.a.Value,{text:!0},l.a.createElement("font",{color:"#643cc6"},R[3].fname)),l.a.createElement(ie.a.Label,null,R[3].sum," Orders")),R.length>=5&&l.a.createElement(ie.a,null,l.a.createElement(ie.a.Value,null,"5th"),l.a.createElement(ie.a.Value,{text:!0},l.a.createElement("font",{color:"#643cc6"},R[4].fname)),l.a.createElement(ie.a.Label,null,R[4].sum," Orders"))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null)):l.a.createElement(k.a,{size:"massive",basic:!0,placeholder:!0,content:"You have not selected a period",textAlign:"center",loading:S}),l.a.createElement("h1",null,"Promotional Campaigns"),Ce.map((function(e,t){return l.a.createElement("div",{key:t},l.a.createElement("h2",null,e),l.a.createElement(ie.a.Group,{widths:"3",size:"small",style:{margin:"1em 0 1em 0"}},l.a.createElement(ie.a,null,l.a.createElement(ie.a.Value,null,"30"),l.a.createElement(ie.a.Label,null,"Days")),l.a.createElement(ie.a,null,l.a.createElement(ie.a.Label,null,"Total orders"),l.a.createElement(ie.a.Value,null,l.a.createElement(E.a,{name:"food"}),"3432")),l.a.createElement(ie.a,null,l.a.createElement(ie.a.Label,null,"Average orders"),l.a.createElement(ie.a.Value,null,l.a.createElement(E.a,{name:"food"}),"34"))))}))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null))},Se=a(434),De=a(258);var ke=function(e){var t,a=Object(n.useState)(!1),r=Object(o.a)(a,2),c=r[0],i=r[1];return l.a.createElement($.a,null,l.a.createElement($.a.Image,{src:e.imgurl}),l.a.createElement($.a.Content,null,l.a.createElement($.a.Header,{style:{display:"flex",justifyContent:"space-between"}},l.a.createElement(S.a,{value:e.name,size:"mini",onChange:function(t,a){var n=a.value;e.updateFoodItem("name",n,e.index)}}),l.a.createElement(S.a,{type:"number",label:l.a.createElement(H.a,{basic:!0},"$"),labelPosition:"left",value:0===e.price?"":e.price,size:"mini",onChange:function(t,a){var n=Number(Number(a.value).toFixed(2));e.updateFoodItem("price",n,e.index)}})),l.a.createElement($.a.Extra,null,l.a.createElement(S.a,{as:H.a,value:e.category,size:"mini",transparent:!0,onChange:function(t,a){var n=a.value;e.updateFoodItem("category",n,e.index)}})),l.a.createElement($.a.Extra,null,l.a.createElement(S.a,{label:l.a.createElement(H.a,{basic:!0},"Image url"),labelPosition:"left",value:e.imgurl,size:"mini",onChange:function(t,a){var n=a.value;e.updateFoodItem("imgurl",n,e.index)}})),l.a.createElement($.a.Extra,null,l.a.createElement(W.a,{minValue:0,value:e.limit.toString(),onChange:function(t){var a=parseInt(t);e.updateFoodItem("limit",a,e.index)},className:"number-input"}),e.deleteFoodItem&&l.a.createElement(V.a,{open:c,onClose:function(){return i(!1)},trigger:l.a.createElement(z.a,(t={color:"red",floated:"right"},Object(De.a)(t,"color","red"),Object(De.a)(t,"icon","close"),Object(De.a)(t,"onClick",(function(){return i(!0)})),t))},l.a.createElement(V.a.Header,null,"Confirm delete menu item?"),l.a.createElement(V.a.Content,null,"Confirm delete ",e.name," from the menu? This cannot be undone."),l.a.createElement(V.a.Actions,null,l.a.createElement(z.a,{color:"red",content:"Cancel",onClick:function(){return i(!1)}}),l.a.createElement(z.a,{color:"green",content:"Confirm",onClick:function(){e.deleteFoodItem(e.name),i(!1)}}))))))};var Fe=function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(""),m=Object(o.a)(i,2),u=m[0],s=m[1],d=Object(n.useState)(0),E=Object(o.a)(d,2),f=E[0],g=E[1],p=Object(n.useState)(""),b=Object(o.a)(p,2),h=b[0],y=b[1],v=Object(n.useState)(0),j=Object(o.a)(v,2),O=j[0],w=j[1],C=Object(n.useState)(""),x=Object(o.a)(C,2),S=x[0],D=x[1],k=u&&f&&h;return l.a.createElement(V.a,{open:r,onOpen:function(){s(""),g(0),y(""),w(0),D("https://platerate.com/images/tempfoodnotext.png")},onClose:function(){return c(!1)},trigger:l.a.createElement(z.a,{color:"teal",onClick:function(){return c(!0)},icon:"plus"})},l.a.createElement(V.a.Header,null,"Add new food item"),l.a.createElement(V.a.Content,null,l.a.createElement($.a.Group,null,l.a.createElement(ke,{name:u,price:f,category:h,limit:O,imgurl:S,updateFoodItem:function(e,t){switch(e){case"name":s(t);break;case"price":g(t);break;case"category":y(t);break;case"limit":w(t);break;case"imgurl":D(t);default:console.log("Unknown key in creating new food item")}}}))),l.a.createElement(V.a.Actions,null,l.a.createElement(z.a,{color:"red",content:"Cancel",onClick:function(){return c(!1)}}),l.a.createElement(z.a,{color:"green",content:"Confirm",disabled:!k,onClick:function(){e.createFoodItem({name:"'".concat(u,"'"),price:"'".concat(f,"'"),category:"'".concat(h,"'"),limit:"".concat(O),imgurl:"'".concat(S,"'")}),c(!1)}})))};var Me=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)([]),i=Object(o.a)(c,2),m=i[0],u=i[1],s=Object(n.useState)(!1),d=Object(o.a)(s,2),E=d[0],f=d[1],g=Object(n.useState)(0),p=Object(o.a)(g,2),b=p[0],h=p[1],y=Object(n.useState)(!0),v=Object(o.a)(y,2),j=v[0],w=v[1],C=Object(n.useContext)(O).uid;Object(n.useEffect)((function(){D()}),[]);var x=function(e,t,a){var n=Object(Se.a)(m),l=n[a],r={name:l.name,price:l.price,category:l.category,limit:l.limit,imgurl:l.imgurl};r[e]=t,n[a]=r,u(n)},D=function(){w(!0);var e="http://localhost:5000/api/staffs/".concat(C);Y.a.get(e).then((function(e){var t=e.data.rname;r(t);var a="http://localhost:5000/api/restaurants/'".concat(t,"'/menu");Y.a.get(a).then((function(e){var t=e.data.minamt,a=e.data.menu;u(a),h(t),w(!1)})).catch((function(e){console.log("Error",e)}))})).catch((function(e){console.log("Error",e)}))},F=function(e){console.log("Delete this item:",e);var t="http://localhost:5000/api/restaurants/'".concat(a,"'/menu");Y.a.delete(t,{data:{fname:"'".concat(e,"'")}}).then((function(e){console.log("Deleted item from menu:",e.data),D()})).catch((function(e){console.log("Error occurred deleting item from menu",e)}))},M=function(){var e=[];return m.forEach((function(t){var a={};a.fname="'".concat(t.name,"'"),a.cat="'".concat(t.category,"'"),a.imgurl="'".concat(t.imgurl,"'"),a.flimit="".concat(t.limit),a.price="".concat(t.price),e.push(a)})),e};return l.a.createElement(l.a.Fragment,null,E&&l.a.createElement(ce.a,{success:!0,header:"Success",content:"Food items are updated successfully",style:{textAlign:"center"}}),l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.a.createElement("h1",null,j?l.a.createElement(me.a,{inline:!0,active:!0}):a),l.a.createElement("span",null,l.a.createElement(z.a,{color:"blue",onClick:function(){var e={foodLimitPrice:M(),minamt:b},t="http://localhost:5000/api/restaurants/'".concat(a,"'/menu");Y.a.put(t,e).then((function(e){console.log(e.data)})).catch((function(e){console.log("Error updating menu:",e)})),f(!0)}},"Save changes"),l.a.createElement(Fe,{createFoodItem:function(e){var t="http://localhost:5000/api/restaurants/'".concat(a,"'/menu");console.log(e),Y.a.post(t,e).then((function(e){console.log(e),console.log("Item successfully added to the menu"),D()})).catch((function(e){console.log("An error occured while adding new item to the menu"),console.log(e.data)}))}}))),l.a.createElement(te.a,null,l.a.createElement(te.a.Field,{inline:!0},l.a.createElement("label",null,"Min order amount"),l.a.createElement(S.a,{type:"number",label:l.a.createElement(H.a,{basic:!0},"$"),labelPosition:"left",value:b,size:"mini",onChange:function(e,t){var a=Number(Number(t.value).toFixed(2));h(a)},disabled:j,loading:j}))),j?l.a.createElement(k.a,{size:"massive",basic:!0,placeholder:!0,textAlign:"center",loading:j}):l.a.createElement($.a.Group,{divided:!0},m.map((function(e,t){return l.a.createElement(ke,{key:t,index:t,name:e.name,price:e.price,category:e.category,limit:e.limit,imgurl:e.imgurl,updateFoodItem:x,deleteFoodItem:F})}))))};var Ie=function(){return l.a.createElement("main",{className:"staff-menu-page"},l.a.createElement(s.a,{size:"huge",style:{opacity:0}}),l.a.createElement(C.a,null,l.a.createElement(Me,null)),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null))};var Ve=function(e){return l.a.createElement(F.a,{fluid:!0,raised:!0,color:"teal"},l.a.createElement(F.a.Content,null,l.a.createElement(F.a.Header,{style:{display:"flex",justifyContent:"space-between"}},"Customer ID: ",e.cid)),l.a.createElement(F.a.Content,null,l.a.createElement(F.a.Header,null,l.a.createElement(M.a,{floated:"left",size:"mini",src:"https://react.semantic-ui.com/images/avatar/large/".concat(e.image)}),"Name: ",e.name),l.a.createElement(F.a.Description,null,l.a.createElement(E.a,{name:"mail"}),l.a.createElement("a",{href:!0},e.email),l.a.createElement("br",null),l.a.createElement(E.a,{name:"file alternate"}),l.a.createElement("strong",null,"Number of orders: ",e.ordercount),l.a.createElement("br",null),l.a.createElement("strong",null,"Total payment: ",l.a.createElement(E.a,{name:"dollar"}),e.totalpayment))))};var ze=function(e){return l.a.createElement(F.a,{fluid:!0,raised:!0,color:"teal"},l.a.createElement(F.a.Content,null,l.a.createElement(F.a.Header,null,l.a.createElement(E.a,{name:"location arrow"}),"Delivery Location: ",e.location),l.a.createElement(F.a.Description,null,l.a.createElement(E.a,{name:"file alternate"}),l.a.createElement("strong",null,"Order Count: ",e.count))))};var Le=function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),r=a[0],c=a[1];return l.a.createElement(F.a,{fluid:!0,raised:!0,color:"teal"},l.a.createElement(F.a.Content,null,l.a.createElement(F.a.Header,{style:{display:"flex",justifyContent:"space-between"}},"Rider ID: ",e.id,l.a.createElement(z.a,{primary:!0,floated:"right",onClick:function(){return c(!r)}},r?"View less":"View more")),r&&l.a.createElement(F.a.Description,null,l.a.createElement(E.a,{name:"dollar"}),l.a.createElement("strong",null,"Total Salary = ",e.totalsalary),l.a.createElement("br",null),l.a.createElement(E.a,{name:"clock outline"}),l.a.createElement("strong",null,e.hours," hours worked "),l.a.createElement("br",null),l.a.createElement(E.a,{name:"motorcycle"}),l.a.createElement("strong",null,e.noorder," orders delivered"),l.a.createElement("br",null),l.a.createElement(E.a,{name:"clock"}),l.a.createElement("strong",null,"Average delivery time of ",e.avgdelivertime," mins"),l.a.createElement("br",null),l.a.createElement(E.a,{name:"star outline"}),l.a.createElement("strong",null,e.norating," ratings received "),l.a.createElement("br",null),l.a.createElement("strong",null," ","Average rating: ",e.avgrating," ",l.a.createElement(E.a,{name:"star"})))))};var Te=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),i=Object(o.a)(c,2),m=i[0],u=i[1],d=Object(n.useState)([]),f=Object(o.a)(d,2),g=f[0],p=f[1],b=Object(n.useState)([]),h=Object(o.a)(b,2),y=h[0],v=h[1],j=Object(n.useState)([]),O=Object(o.a)(j,2),w=O[0],x=O[1],S=Object(n.useState)(!0),D=Object(o.a)(S,2),M=D[0],I=D[1],V=Object(n.useState)(!1),L=Object(o.a)(V,2),A=L[0],R=L[1],P=Object(n.useState)(!0),_=Object(o.a)(P,2),G=_[0],N=_[1],H=Object(n.useState)(!1),$=Object(o.a)(H,2),q=$[0],W=$[1],U=Object(n.useState)(!1),B=Object(o.a)(U,2),K=B[0],Q=B[1],X=Object(n.useState)(!1),Z=Object(o.a)(X,2),ee=Z[0],te=Z[1];Object(n.useEffect)((function(){Y.a.get("http://localhost:5000/api/managers/summary/general").then((function(e){var t=e.data.overviewsummary;console.log(t),x(t),I(!1)})).catch((function(e){console.log("Error retrieving overview:",e)}))}),[]);var ae=function(e){u(e),r({});var t=e.split(" - ");if(console.log(t),t.length<2||""===t[0]||""===t[1])return console.log("period invalid"),[];var a=Object(pe.a)(t[0],"MM/yyyy",new Date),n=Object(pe.a)(t[1],"MM/yyyy",new Date);if(Object(be.a)(n,a)){var l=[n,a];a=l[0],n=l[1]}!function(e,t){R(!0);var a=Object(J.a)(e),n=Object(J.a)(t),l="http://localhost:5000/api/managers/summary/customers?starttime=".concat(a,"&endtime=").concat(n);Y.a.get(l).then((function(a){var n=a.data.fdssummary;console.log(n),v(n),r([e,t]),R(!1)})).catch((function(e){console.log("Error retrieving customer summary data:",e),R(!1)}))}(Object(ve.a)(a),Object(je.a)(n)),function(e,t){R(!0);var a=Object(J.a)(e),n=Object(J.a)(t),l="http://localhost:5000/api/managers/summary/riders?starttime=".concat(a,"&endtime=").concat(n);Y.a.get(l).then((function(a){console.log(a.date),p(a.data),r([e,t]),R(!1)})).catch((function(e){console.log("Error retrieving rider summary data:",e),R(!1)}))}(Object(ve.a)(a),Object(je.a)(n))},ne=w.goodcustomers,le=w.toplocations,re=w.topriders,ce=["elliot.jpg","helen.jpg","jenny.jpg","joe.jpg","justen.jpg","laura.jpg","steve.jpg","molly.png"];return l.a.createElement("main",{className:"manager-summary-page"},l.a.createElement(s.a,{size:"huge",style:{opacity:0}}),l.a.createElement(C.a,null,l.a.createElement("div",{style:{display:"flex"}},l.a.createElement("span",{style:{display:"flex",flexWrap:"wrap"}},l.a.createElement("h2",{style:{marginInlineEnd:"1rem"}},"Summary for period"),l.a.createElement(ge.MonthRangeInput,{style:{marginInlineEnd:"5rem"},className:"rounded-input",clearable:!0,placeholder:"Select month(s)",popupPosition:"bottom center",onChange:function(e,t){ae(t.value)},dateFormat:"MM/YYYY",value:m,maxDate:new Date,loading:A,disabled:A,closable:!0})),l.a.createElement("span",null,l.a.createElement(z.a.Group,null,l.a.createElement(z.a,{color:"purple",onClick:function(){N(!0),W(!1),Q(!1),te(!1),u(""),r([])}},l.a.createElement(z.a.Content,null,"Overview")),l.a.createElement(z.a,{color:"purple",onClick:function(){W(!0),N(!1),Q(!1),te(!1),u(""),r([])}},l.a.createElement(z.a.Content,null,"View Customers")),l.a.createElement(z.a,{color:"purple",onClick:function(){Q(!0),N(!1),W(!1),te(!1),u(""),r([])}},l.a.createElement(z.a.Content,null,"View Orders")),l.a.createElement(z.a,{color:"purple",onClick:function(){te(!0),N(!1),W(!1),Q(!1),u(""),r([])}},l.a.createElement(z.a.Content,null,"View Riders"))))),2===a.length&&G?l.a.createElement(C.a,null,l.a.createElement("h1",null,"Overview"),l.a.createElement(k.a,{basic:!0,textAlign:"center",size:"small"},l.a.createElement("h1",null,"Start of"," ",l.a.createElement("font",{color:"#3445c3"},Object(T.a)(a[0],"MMM yyyy"))," to End of"," ",l.a.createElement("font",{color:"#3445c3"},Object(T.a)(a[1],"MMM yyyy")))),l.a.createElement(ie.a.Group,{widths:"2",size:"large",style:{margin:"3em 0 3em 0"}},l.a.createElement(ie.a,null,l.a.createElement(ie.a.Label,null,"Total New Customers"),l.a.createElement(ie.a.Value,null,l.a.createElement(E.a,{name:"user"}),y.newcustomers)),l.a.createElement(ie.a,null,l.a.createElement(ie.a.Label,null,"Total New Orders"),l.a.createElement(ie.a.Value,null,l.a.createElement(E.a,{name:"food"}),y.ordercount))),l.a.createElement(ie.a.Group,{widths:"2",size:"large",style:{margin:"1em 0 1em 0"}},l.a.createElement(ie.a,null,l.a.createElement(ie.a.Label,null,"Total Completed Orders"),l.a.createElement(ie.a.Value,null,l.a.createElement(E.a,{name:"food"}),y.completedorders)),l.a.createElement(ie.a,null,l.a.createElement(ie.a.Label,null,"Total Cost of Completed Orders"),l.a.createElement(ie.a.Value,null,l.a.createElement(E.a,{name:"dollar"}),y.orderscost)))):q&&2!=a.length?l.a.createElement(C.a,null,l.a.createElement("h1",null,"Customer List"),M?l.a.createElement(me.a,{active:!0,size:"large"},"Loading"):l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,{textAlign:"center",basic:!0,size:"huge",content:"You have not selected a period"}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(ie.a.Group,{widths:"1",size:"huge"},l.a.createElement(ie.a,null,l.a.createElement(ie.a.Label,null,l.a.createElement("font",{color:"#643cc6"},"Top 3 Customers"))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null)),ne&&l.a.createElement(ie.a.Group,{widths:ne.length,size:"small"},ne.length>=1&&l.a.createElement(ie.a,null,l.a.createElement(ie.a.Value,null,ne[0].name),l.a.createElement(ie.a.Value,{text:!0},"Customer ID: "," ",l.a.createElement("font",{color:"#643cc6"},ne[0].cid)),l.a.createElement(ie.a.Label,null,l.a.createElement("font",{color:"#643cc6"},ne[0].count)," "," ","Orders",l.a.createElement("br",null),l.a.createElement(E.a,{name:"dollar"}),ne[0].sum)),ne.length>=2&&l.a.createElement(ie.a,null,l.a.createElement(ie.a.Value,null,ne[1].name),l.a.createElement(ie.a.Value,{text:!0},"Customer ID: "," ",l.a.createElement("font",{color:"#643cc6"},ne[1].cid)),l.a.createElement(ie.a.Label,null,l.a.createElement("font",{color:"#643cc6"},ne[1].count)," "," ","Orders",l.a.createElement("br",null),l.a.createElement(E.a,{name:"dollar"}),ne[1].sum)),ne.length>=3&&l.a.createElement(ie.a,null,l.a.createElement(ie.a.Value,null,ne[2].name),l.a.createElement(ie.a.Value,{text:!0},"Customer ID: "," ",l.a.createElement("font",{color:"#643cc6"},ne[2].cid)),l.a.createElement(ie.a.Label,null,l.a.createElement("font",{color:"#643cc6"},ne[2].count)," "," ","Orders",l.a.createElement("br",null),l.a.createElement(E.a,{name:"dollar"}),ne[2].sum))))):q&&2===a.length?l.a.createElement(C.a,null,l.a.createElement("h1",null,"Customer List"),l.a.createElement(k.a,{basic:!0,textAlign:"center",size:"small"},l.a.createElement("h1",null,"Start of"," ",l.a.createElement("font",{color:"#3445c3"},Object(T.a)(a[0],"MMM yyyy"))," to End of"," ",l.a.createElement("font",{color:"#3445c3"},Object(T.a)(a[1],"MMM yyyy")))),l.a.createElement(F.a.Group,null,null==y.customerorders?l.a.createElement(k.a,{textAlign:"center",basic:!0,size:"huge",content:"No data for this period"}):y.customerorders.map((function(e,t){var a=ce[Math.floor(Math.random()*ce.length)];return l.a.createElement(Ve,{key:t,cid:e.cid,name:e.name,email:e.email,ordercount:e.ordercount,totalpayment:e.totalpayment,image:a})})))):K&&2!=a.length?l.a.createElement(C.a,null,l.a.createElement("h1",null,"Order Location List"),M?l.a.createElement(me.a,{active:!0,size:"large"},"Loading"):l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,{textAlign:"center",basic:!0,size:"huge",content:"You have not selected a period"}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(ie.a.Group,{widths:"1",size:"huge"},l.a.createElement(ie.a,null,l.a.createElement(ie.a.Label,null,l.a.createElement("font",{color:"#643cc6"},"Top 3 Locations"))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null)),le&&l.a.createElement(ie.a.Group,{widths:le.length,size:"small"},le.length>=1&&l.a.createElement(ie.a,null,l.a.createElement(ie.a.Value,null,le[0].location),l.a.createElement("br",null),l.a.createElement(ie.a.Label,null,l.a.createElement("font",{color:"#643cc6"},le[0].count)," ","Orders")),le.length>=2&&l.a.createElement(ie.a,null,l.a.createElement(ie.a.Value,null,le[1].location),l.a.createElement("br",null),l.a.createElement(ie.a.Value,{text:!0},l.a.createElement("font",{color:"#643cc6"},le[1].count)," ","Orders")),le.length>=3&&l.a.createElement(ie.a,null,l.a.createElement(ie.a.Value,null,le[2].location),l.a.createElement("br",null),l.a.createElement(ie.a.Value,{text:!0},l.a.createElement("font",{color:"#643cc6"},le[2].count)," ","Orders"))))):K&&2===a.length?l.a.createElement(C.a,null,l.a.createElement("h1",null,"Order Location List"),l.a.createElement(k.a,{basic:!0,textAlign:"center",size:"small"},l.a.createElement("h1",null,"Start of"," ",l.a.createElement("font",{color:"#3445c3"},Object(T.a)(a[0],"MMM yyyy"))," to End of"," ",l.a.createElement("font",{color:"#3445c3"},Object(T.a)(a[1],"MMM yyyy")))),l.a.createElement(F.a.Group,null,null==y.orderlocations?l.a.createElement(k.a,{textAlign:"center",basic:!0,size:"huge",content:"No data for this period"}):y.orderlocations.map((function(e,t){return l.a.createElement(ze,{key:t,location:e.location,count:e.count})})))):ee&&2!=a.length?l.a.createElement(C.a,null,l.a.createElement("h1",null,"Rider List"),M?l.a.createElement(me.a,{active:!0,size:"large"},"Loading"):l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,{textAlign:"center",basic:!0,size:"huge",content:"You have not selected a period"}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(ie.a.Group,{widths:"1",size:"huge"},l.a.createElement(ie.a,null,l.a.createElement(ie.a.Label,null,l.a.createElement("font",{color:"#643cc6"},"Top 3 Riders"))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null)),re&&l.a.createElement(ie.a.Group,{widths:re.length,size:"small"},re.length>=1&&l.a.createElement(ie.a,null,l.a.createElement(ie.a.Value,null,re[0].name),l.a.createElement(ie.a.Value,{text:!0},"Rider ID: "," ",l.a.createElement("font",{color:"#643cc6"},re[0].rid)),l.a.createElement(ie.a.Label,null,l.a.createElement("font",{color:"#643cc6"},re[0].count)," "," ","Orders Delivered",l.a.createElement("br",null),l.a.createElement(E.a,{name:"motorcycle"}),"Average delivery time of"," ",l.a.createElement("font",{color:"#643cc6"},parseFloat(re[0].avg).toFixed(2))," ","mins")),re.length>=2&&l.a.createElement(ie.a,null,l.a.createElement(ie.a.Value,null,re[1].name),l.a.createElement(ie.a.Value,{text:!0},"Rider ID: "," ",l.a.createElement("font",{color:"#643cc6"},re[1].rid)),l.a.createElement(ie.a.Label,null,l.a.createElement("font",{color:"#643cc6"},re[1].count)," "," ","Orders Delivered",l.a.createElement("br",null),l.a.createElement(E.a,{name:"motorcycle"}),"Average delivery time of"," ",l.a.createElement("font",{color:"#643cc6"},parseFloat(re[1].avg).toFixed(2))," ","mins")),re.length>=3&&l.a.createElement(ie.a,null,l.a.createElement(ie.a.Value,null,re[2].name),l.a.createElement(ie.a.Value,{text:!0},"Rider ID: "," ",l.a.createElement("font",{color:"#643cc6"},re[2].rid)),l.a.createElement(ie.a.Label,null,l.a.createElement("font",{color:"#643cc6"},re[2].count)," "," ","Orders Delivered",l.a.createElement("br",null),l.a.createElement(E.a,{name:"motorcycle"}),"Average delivery time of"," ",l.a.createElement("font",{color:"#643cc6"},(parseFloat(re[2].avg)/60).toFixed(2))," ","mins"))))):ee&&2===a.length?l.a.createElement(C.a,null,l.a.createElement("h1",null,"Rider List"),l.a.createElement(k.a,{basic:!0,textAlign:"center",size:"small"},l.a.createElement("h1",null,"Start of"," ",l.a.createElement("font",{color:"#3445c3"},Object(T.a)(a[0],"MMM yyyy"))," to End of"," ",l.a.createElement("font",{color:"#3445c3"},Object(T.a)(a[1],"MMM yyyy")))),l.a.createElement(F.a.Group,null,g.map((function(e,t){return l.a.createElement(Le,{key:t,id:e.riderinfo.id,totalsalary:e.riderinfo.totalsalary,hours:e.riderinfo.hours,noorder:e.riderinfo.noorder,avgdelivertime:(parseFloat(e.riderinfo.avgdelivertime)/60).toFixed(2),norating:e.riderinfo.norating,avgrating:e.riderinfo.avgrating})})))):l.a.createElement(C.a,null,l.a.createElement("h1",null,"Overview"),M?l.a.createElement(me.a,{active:!0,size:"large"},"Loading"):l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,{textAlign:"center",basic:!0,size:"huge",content:"You have not selected a period"}),l.a.createElement(ie.a.Group,{widths:"2",size:"large",style:{margin:"3em 0 3em 0"}},l.a.createElement(ie.a,null,l.a.createElement(ie.a.Label,null,"Total Customers"),l.a.createElement(ie.a.Value,null,l.a.createElement(E.a,{name:"user"}),w.totalcustomers)),l.a.createElement(ie.a,null,l.a.createElement(ie.a.Label,null,"Total Orders"),l.a.createElement(ie.a.Value,null,l.a.createElement(E.a,{name:"food"}),w.totalorders))),l.a.createElement(ie.a.Group,{widths:"2",size:"large",style:{margin:"1em 0 1em 0"}},l.a.createElement(ie.a,null,l.a.createElement(ie.a.Label,null,"Total Completed Orders"),l.a.createElement(ie.a.Value,null,l.a.createElement(E.a,{name:"food"}),w.totalcompletedorders)),l.a.createElement(ie.a,null,l.a.createElement(ie.a.Label,null,"Total Cost of Completed Orders"),l.a.createElement(ie.a.Value,null,l.a.createElement(E.a,{name:"dollar"}),w.totalcost)))))))};var Ae=function(e){function t(){return Date.now()-e.edatetime>0?1:Date.now()-e.sdatetime<0?2:0}return l.a.createElement(F.a,{fluid:!0,raised:!0,color:"purple"},l.a.createElement(F.a.Content,null,l.a.createElement(F.a.Header,{style:{display:"flex",justifyContent:"space-between"}},"Promotion ID: ",e.pid)),l.a.createElement(F.a.Content,null,l.a.createElement(F.a.Description,null,l.a.createElement("div",{style:{fontWeight:"bold"}},"Start: ",Object(T.a)(e.sdatetime,"dd/MM/yyyy hh:mm aa "),l.a.createElement("br",null),"End: ",Object(T.a)(e.edatetime," dd/MM/yyyy hh:mm aa")),l.a.createElement("span",null,l.a.createElement(H.a,{color:1===t()?"red":2===t()?"grey":"green",style:{marginLeft:"1000px"}},function(){switch(t()){case 1:return"Expired";case 2:return"Upcoming";default:return"Ongoing"}}())),l.a.createElement("br",null),l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},"Promotion details: ",function(){switch(e.discount){case 1:return"Free Delivery";default:return(100*e.discount).toPrecision(2)+"% discount"}}()))))};var Ye=function(e,t,a,n,l){return Y.a.post("http://localhost:5000/api/promotions",{sdatetime:e,edatetime:t,discount:a}).then((function(e){console.log("response",e.data),n(!1),l(!0)})).catch((function(e){console.log("Error creating promotion:",e),n(!0),l(!1)}))};var Re=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),i=Object(o.a)(c,2),m=i[0],u=i[1],s=Object(n.useState)(""),d=Object(o.a)(s,2),E=d[0],f=d[1],g=Object(n.useState)(""),p=Object(o.a)(g,2),b=p[0],h=p[1],y=Object(n.useState)(!1),v=Object(o.a)(y,2),j=v[0],O=v[1],w=Object(n.useState)(!1),C=Object(o.a)(w,2),x=C[0],S=C[1],D=Object(n.useState)(1),k=Object(o.a)(D,2),F=k[0],M=k[1],I=Object(n.useState)(!1),L=Object(o.a)(I,2),T=L[0],A=L[1],Y=b/100,R=new Date(m.toString()).getTime(),P=new Date(E.toString()).getTime();return l.a.createElement(V.a,{size:"small",open:a,onClose:function(){return r(!1)},trigger:l.a.createElement(z.a,{color:"teal",onClick:function(){return r(!0)}},l.a.createElement(z.a.Content,null,"Create New promotion"))},l.a.createElement(V.a.Header,null,"Create New Promotion"),l.a.createElement(V.a.Content,null,l.a.createElement(V.a.Description,null,l.a.createElement(te.a,null,l.a.createElement(te.a.Input,{label:"Start Date (format: MM/dd/yyyy hh:mm aa)",value:m,onChange:function(e,t){u(t.value)}}),l.a.createElement(te.a.Input,{label:"End Date (format: MM/dd/yyyy hh:mm aa)",value:E,onChange:function(e,t){f(t.value)}}),l.a.createElement(te.a.Input,{label:"Discount (eg. input 50 for 50% off)",value:b,onChange:function(e,t){console.log(t.value),h(t.value)}}),l.a.createElement(te.a.Checkbox,{label:"Free Delivery Promotion",onChange:function(e,t){A(function(){switch(F){case 0:return h(""),!1;case 1:return h(100),!0}}()),M(Math.abs(F-1))},checked:T})),j&&l.a.createElement(ce.a,{success:!0,header:"Promotion created successfully",content:"You may close the form"}),x&&l.a.createElement(ce.a,{error:!0,header:"Invalid input",content:"Please follow the format for each field"}))),l.a.createElement(V.a.Actions,null,l.a.createElement(z.a,{color:"red",content:"Cancel",onClick:function(){r(!1),O(!1),S(!1),h(""),u(""),f("")}}),l.a.createElement(z.a,{color:"blue",content:"Create",onClick:function(){Ye(R/1e3,P/1e3,Y,S,O)}})))};var Pe=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)([]),i=Object(o.a)(c,2),m=i[0],u=i[1],d=function(e){var t=e.split(" - ");if(console.log(t),t.length<2||""===t[0]||""===t[1])return console.log("period invalid"),[];var a=Object(pe.a)(t[0],"MM/yyyy",new Date),n=Object(pe.a)(t[1],"MM/yyyy",new Date);if(Object(be.a)(n,a)){var l=[n,a];a=l[0],n=l[1]}return[a,n]}(a);return Object(n.useEffect)((function(){Y.a.get("http://localhost:5000/api/promotions").then((function(e){console.log("response",e.data),u(e.data)})).catch((function(e){console.log("Error retrieving promotions:",e)}))}),[]),l.a.createElement("main",{className:"manager-promotion-page"},l.a.createElement(s.a,{size:"huge",style:{opacity:0}}),l.a.createElement(C.a,null,l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.a.createElement("span",{style:{display:"flex",flexWrap:"wrap"}},l.a.createElement("h2",{style:{marginInlineEnd:"1rem"}},"View Promotions for period"),l.a.createElement(ge.MonthRangeInput,{className:"rounded-input",clearable:!0,placeholder:"Select month(s)",popupPosition:"bottom center",onChange:function(e,t){r(t.value)},dateFormat:"MM/YYYY",value:a,closable:!0})),l.a.createElement("span",null,l.a.createElement(z.a.Group,null,l.a.createElement(Re,null)))),d.length>0?l.a.createElement(C.a,null,l.a.createElement(F.a.Group,null,m.filter((function(e){return 1e3*e.promo.sdatetime>=new Date(d[0].toString()).getTime()&&1e3*e.promo.sdatetime<=new Date(d[1].toString()).getTime()})).map((function(e,t){return l.a.createElement(Ae,{key:t,pid:e.promo.pid,edatetime:1e3*e.promo.edatetime,sdatetime:1e3*e.promo.sdatetime,discount:e.promo.discount})})))):l.a.createElement(C.a,null,l.a.createElement(F.a.Group,null,m.map((function(e,t){return l.a.createElement(Ae,{key:t,pid:e.promo.pid,edatetime:1e3*e.promo.edatetime,sdatetime:1e3*e.promo.sdatetime,discount:e.promo.discount})}))))))};var _e=function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(""),m=Object(o.a)(i,2),u=m[0],s=m[1],f=Object(n.useState)(""),g=Object(o.a)(f,2),p=g[0],b=g[1],h=Object(n.useState)(""),y=Object(o.a)(h,2),v=y[0],j=y[1],O=Object(n.useState)(""),w=Object(o.a)(O,2),x=w[0],S=w[1],D=Object(n.useState)(0),F=Object(o.a)(D,2),M=F[0],I=F[1],V=Object(n.useState)(0),z=Object(o.a)(V,2),L=z[0],T=z[1],A=Object(n.useState)(""),R=Object(o.a)(A,2),P=R[0],_=R[1],G=Object(n.useState)(!1),N=Object(o.a)(G,2),H=N[0],$=N[1],q=function(){c(!r),j(""),s(""),S(""),b(""),T(0),I(0),_("")};return l.a.createElement("main",{className:"login-page",style:{height:"100vh",overflow:"auto"}},l.a.createElement(C.a,null,l.a.createElement(re.a,{style:{height:"100vh"},textAlign:"center",verticalAlign:"middle"},l.a.createElement(re.a.Column,null,l.a.createElement(k.a,{raised:!0,placeholder:!0,size:"massive"},l.a.createElement(re.a,{columns:2,relaxed:"very",stackable:!0},l.a.createElement(re.a.Column,{verticalAlign:"middle"},l.a.createElement(te.a,null,l.a.createElement(d.a,null,r?"Sign up":"Sign in"),r&&l.a.createElement(te.a.Input,{icon:"user",iconPosition:"left",placeholder:"Name",onChange:function(e,t){return j(t.value)},value:v}),l.a.createElement(te.a.Input,{icon:"mail",iconPosition:"left",placeholder:"Email",onChange:function(e,t){r?S(t.value):s(t.value)},value:r?x:u,type:"email"}),l.a.createElement(te.a.Input,{icon:"lock",iconPosition:"left",placeholder:"Password",type:"password",onChange:function(e,t){return b(t.value)},value:p}),r&&l.a.createElement(te.a.Group,{inline:!0,widths:4},l.a.createElement(te.a.Radio,{label:"Customer",value:0,checked:0===M,onChange:function(e,t){return I(t.value)}}),l.a.createElement(te.a.Radio,{label:"Staff",value:1,checked:1===M,onChange:function(e,t){return I(t.value)}}),l.a.createElement(te.a.Radio,{label:"Rider",value:2,checked:2===M,onChange:function(e,t){return I(t.value)}}),l.a.createElement(te.a.Radio,{label:"Manager",value:3,checked:3===M,onChange:function(e,t){return I(t.value)}})),r&&2===M&&l.a.createElement(te.a.Group,{inline:!0,widths:2},l.a.createElement(te.a.Radio,{label:"Part-Time",value:0,checked:0===L,onChange:function(e,t){return T(t.value)}}),l.a.createElement(te.a.Radio,{label:"Full-Time",value:1,checked:1===L,onChange:function(e,t){return T(t.value)}})),r&&1===M&&l.a.createElement(te.a.Input,{icon:"food",iconPosition:"left",placeholder:"Restaurant",value:P,onChange:function(e,t){return _(t.value)}}),l.a.createElement(te.a.Button,{content:r?"Sign up":"Login",primary:!0,fluid:!0,disabled:r&&(!v||!x||!p||1===M&&!P),loading:H,onClick:r?function(){var e;switch(console.log("signing up"),$(!0),M){case 0:e=Y.a.post("http://localhost:5000/api/customers",{name:v,email:x});break;case 1:e=Y.a.post("http://localhost:5000/api/staffs",{name:v,email:x,rname:P});break;case 2:e=Y.a.post("http://localhost:5000/api/riders",{name:v,email:x,isFT:L});break;case 3:e=Y.a.post("http://localhost:5000/api/managers",{name:v,email:x});break;default:return void console.log("Unknown role")}e.then((function(e){200===e.status&&(q(),$(!1))})).catch((function(e){console.log(e),$(!1)}))}:function(){console.log("logging in"),$(!0),Y.a.get("http://localhost:5000/api/users/login?email=".concat(u)).then((function(t){if(console.log(t),200===t.status){var a=t.data,n=a.id,l=a.role,r=a.name,c=a.email;e.login(n,l,r,c)}$(!1)})).catch((function(e){console.log(e),$(!1)}))}}),l.a.createElement(te.a.Button,{content:r?"Back":"Register",secondary:!0,fluid:!0,onClick:q}))),l.a.createElement(re.a.Column,{verticalAlign:"middle"},l.a.createElement(E.a,{name:"truck",size:"massive"}),l.a.createElement("h1",{style:{fontSize:"3rem"}},"Food Truck"))))))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null))};var Ge=function(){var e=Object(n.useState)(),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(),u=Object(o.a)(c,2),s=u[0],d=u[1],E=Object(n.useState)(),f=Object(o.a)(E,2),g=f[0],p=f[1],b=Object(n.useState)(),h=Object(o.a)(b,2),y=h[0],v=h[1],j=function(e,t,a,n){localStorage.setItem("uid",e),localStorage.setItem("role",t),localStorage.setItem("name",a),localStorage.setItem("email",n),C()},C=function(){r(parseInt(localStorage.getItem("uid"))),d(parseInt(localStorage.getItem("role"))),p(localStorage.getItem("name")),v(localStorage.getItem("email"))};return Object(n.useEffect)(C,[]),l.a.createElement("div",{className:"App"},l.a.createElement(i.a,null,a&&s>=0&&g&&y?l.a.createElement(O.Provider,{value:{uid:a,role:s,name:g,email:y,reload:C}},l.a.createElement(w,{signOut:function(){localStorage.clear(),C()}},l.a.createElement(m.d,null,l.a.createElement(m.b,{path:"/",exact:!0,component:x}),0===s&&l.a.createElement(m.b,{path:"/home",exact:!0,component:ee}),0===s&&l.a.createElement(m.b,{path:"/history",exact:!0,component:le}),l.a.createElement(m.b,{path:"/profile",exact:!0,component:se}),2===s&&l.a.createElement(m.b,{path:"/rider/activity",exact:!0,component:fe}),2===s&&l.a.createElement(m.b,{path:"/rider/summary",exact:!0,component:ye}),1===s&&l.a.createElement(m.b,{path:"/staff/summary",exact:!0,component:xe}),1===s&&l.a.createElement(m.b,{path:"/staff/menu",exact:!0,component:Ie}),3===s&&l.a.createElement(m.b,{path:"/manager/summary",exact:!0,component:Te}),3===s&&l.a.createElement(m.b,{path:"/manager/promotion",exact:!0,component:Pe}),l.a.createElement(m.b,null,l.a.createElement(m.a,{to:"/"}))))):l.a.createElement(m.d,null,l.a.createElement(m.b,{path:"/",exact:!0,render:function(e){return l.a.createElement(_e,Object.assign({},e,{login:j}))}}),l.a.createElement(m.b,null,l.a.createElement(m.a,{to:"/"})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(Ge,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[450,1,2]]]);
//# sourceMappingURL=main.7e7ae712.chunk.js.map